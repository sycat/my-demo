name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
on: workflow_dispatch
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-20.04
    env:
      Repo_Name: ${{ github.event.repository.name }}
      Key_Path: ~/aws_ec2_key.pem
      Ssh_Destination: ubuntu@ec2-54-188-83-98.us-west-2.compute.amazonaws.com
    permissions:
      checks: write
    steps:
      - name: Save Ec2 private key
        run: |
          echo "${{ secrets.AWS_EC2_INSTANCE_SSH_PRIVATE_KEY }}" >> ${{ env.Key_Path }}
          chmod 400 ${{ env.Key_Path }}
      - name: run testing
        run: |
          ssh -o StrictHostKeyChecking=no -i ${{ env.Key_Path }} ${{ env.Ssh_Destination }} <<EOF
            cd ~
            pwd
            echo "${{ env.Repo_Name }}"
          EOF

      - run: echo "🍏 This job's status is ${{ job.status }}."